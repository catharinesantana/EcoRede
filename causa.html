<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Causa Social | EcoRede</title>
  <link rel="stylesheet" href="estilo.css">
</head>



<body class="cadastro">

  <div class="cadastro-container">
    <img src="imagens/Design sem nome.png" alt="Fundo" class="bg-img">
    <img src="imagens/Ativo_3600x.png" alt="" class="loga">
    
    <div class="cadastro-box">
      <h2>CADASTRO:</h2>

        <form id="formCausa">
          <label>Nome da Causa:</label>
          <input type="text" id="nomeCausa" placeholder="Digite o nome da causa" required>

          <label>Representante:</label>
          <input type="text" id="representante" placeholder="Nome do representante" required>

          <label>CPF:</label>
          <input type="text" id="cpf" placeholder="000.000.000-00" required>

          <label>E-mail:</label>
          <input type="email" id="email" placeholder="email@exemplo.com" required>

          <label>Sobre a Causa:</label>
          <textarea id="sobre" rows="5" placeholder="Conte um pouco sobre a causa..." required></textarea>

          <label>Link / Rede Social da Causa:</label>
          <input type="url" id="link" placeholder="https://instagram.com/suacausa" required>

          <label>Imagem da Causa:</label>
          <input type="file" id="imagem" accept="image/*" required>

          <button type="submit">Cadastrar</button>
        </form>

    </div>
  </div>

  <script>  
    document.getElementById("formCausa").addEventListener("submit", function(e) {
      e.preventDefault();

      const nome = document.getElementById("nomeCausa").value;
      const representante = document.getElementById("representante").value;
      const cpf = document.getElementById("cpf").value;
      const email = document.getElementById("email").value;
      const sobre = document.getElementById("sobre").value;
      const link = document.getElementById("link").value;
      const imagemInput = document.getElementById("imagem");

      const reader = new FileReader();

      reader.onload = function() {
        const imagemBase64 = reader.result; // converte a imagem em Base64

        const novaCausa = { nome, representante, cpf, email, sobre, link, imagem: imagemBase64 };

        const causas = JSON.parse(localStorage.getItem("causas")) || [];
        causas.push(novaCausa);
        localStorage.setItem("causas", JSON.stringify(causas));

        localStorage.setItem("usuarioCadastrado", "true");

        alert("Causa cadastrada com sucesso!");
        window.location.href = "ecorede.html";
      };

      if (imagemInput.files[0]) {
        reader.readAsDataURL(imagemInput.files[0]);
      } else {
        alert("Por favor, selecione uma imagem.");
      }
    });
  </script>

 

</body>
</html>
